# 19.2 エージェント

エージェント:
- 状態を持つバックグラウンドプロセス
- 初期状態はエージェント開始時に渡した関数で決まる

`Agent.get(agent, fun, timeout \\ 5000)`
- agent: エージェントのディスクリプタ
- fun: 現在の状態を変換する関数
- timeout: タイムアウトまでの時間

指定した無名関数を使って状態を取得する

`Agent.update(agent, fun, timeout \\ 5000)`
- agent: エージェントのディスクリプタ
- fun: 現在の状態を変換する関数
- timeout: タイムアウトまでの時間

指定した無名関数を使って状態を更新する

```
> {:ok, count} = Agent.start(fn -> 0 end)
{:ok, #PID<0.103.0>}
> Agent.get(count, &(&1))
0
> Agent.update(count, &(&1 + 1))
:ok
> Agent.update(count, &(&1 + 1))
:ok
> Agent.get(count, &(&1))
2
```

