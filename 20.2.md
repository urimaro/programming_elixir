# 20.2 マクロはコードを注入する

コンパイラは、コードを解析し、入れ子のタプルに変換する
マクロでタプルを操作する

マクロは受け取った引数を評価しない

以下はそれ自身が内部表現になる

- アトム
- 数値
- リスト(キーワードリスト含む)
- バイナリ
- 2要素のタプル

上記以外は「3要素のタプル」で表現される

```
goh@goh% iex "macros/dumper.exs"
Erlang/OTP 21 [erts-10.1.2] [source] [64-bit] [smp:4:4] [ds:4:4:10] [async-threads:1] [hipe] [dtrace]

:atom
1
1.0
[1, 2, 3]
"binaries"
{1, 2}
[do: 1]
{:{}, [line: 20], [1, 2, 3, 4, 5]}
[
  do: {:__block__, [line: 23],
   [
     {:=, [line: 23], [{:a, [line: 23], nil}, 1]},
     {:+, [line: 23], [{:a, [line: 23], nil}, {:a, [line: 23], nil}]}
   ]}
]
[do: {:+, [line: 35], [1, 2]}, else: {:+, [line: 37], [3, 4]}]
```

---

内部表現 = 抽象構文木

```
[関数名のアトム, 行数を表すキーワードリスト, 引数]
```

